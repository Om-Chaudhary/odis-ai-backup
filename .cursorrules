# Cursor Rules for ODIS AI Web

> See `AGENTS.md` for comprehensive project documentation.

## Quick Reference

- Primary doc: `AGENTS.md`
- Nx inventory: `docs/reference/NX_PROJECTS.md`
- Testing strategy: `docs/testing/TESTING_STRATEGY.md`

## Workspace Overview

- **Framework**: Next.js 15 (App Router), React Server Components by default
- **Language**: TypeScript (strict)
- **Styling**: Tailwind CSS 4 + shadcn/ui (Radix)
- **Data**: Supabase (PostgreSQL) with repository pattern + DI
- **Monorepo**: Nx with domain-grouped libraries

## Import Pattern

```typescript
// Domain-grouped imports
import type { DashboardCase } from "@odis-ai/shared/types";
import { dischargeSchema } from "@odis-ai/shared/validators";
import { CasesService } from "@odis-ai/domain/cases";
import { createServerClient } from "@odis-ai/data-access/db";
import { createPhoneCall } from "@odis-ai/integrations/vapi";
```

## Cursor-Specific Behaviors

### Visual Testing (Playwright MCP)

```javascript
browser_navigate("http://localhost:3000/dashboard")
browser_take_screenshot("name.png")
browser_snapshot()  // Accessibility tree
browser_network_requests()
browser_console_messages()
```

### Code Style

- TypeScript strict mode; prefer interfaces over types
- Formatting: Prettier with Tailwind plugin (runs on commit)
- Naming: lowercase-with-dashes for folders, PascalCase for components

### Key Warnings

1. `createServiceClient()` bypasses RLS — use only in admin/webhook paths
2. Use refs for polling/interval stability in hooks
3. Default to Server Components; minimize `"use client"`
4. `NEXT_PUBLIC_*` variables are public — never store secrets

## Common Workflows

- Add component: `npx shadcn@latest add <component>`
- Run affected: `nx affected -t lint,test`
- View graph: `pnpm graph`
- Regenerate docs: `pnpm docs:nx`
