# Railway Deployment Configuration - Service Level
# Note: Root railway.toml takes precedence for monorepo deployments

[build]
# Use Docker for deployment (multi-stage build)
builder = "dockerfile"
dockerfilePath = "apps/pims-sync/Dockerfile"

# Watch patterns for selective rebuilds
watchPatterns = [
  "apps/pims-sync/**",
  "libs/domain/sync/**",
  "libs/integrations/idexx/**",
  "libs/integrations/axiom/**",
  "libs/data-access/**",
  "libs/shared/**"
]

[deploy]
# Health check configuration
healthcheckPath = "/health"
healthcheckTimeout = 60
startCommand = "node main.js"
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 3

# Resource configuration
numReplicas = 1
