# ODIS AI Web - Environment Variables Template
# Copy this file to .env.local and fill in your actual values

# =============================================================================
# REQUIRED - Supabase Configuration
# =============================================================================
# Get these from your Supabase project dashboard: https://supabase.com/dashboard
NEXT_PUBLIC_SUPABASE_URL="https://your-project-ref.supabase.co"
NEXT_PUBLIC_SUPABASE_ANON_KEY="your-anon-key-here"
SUPABASE_SERVICE_ROLE_KEY="your-service-role-key-here"

# =============================================================================
# REQUIRED - Sanity CMS Configuration
# =============================================================================
# Get these from your Sanity project: https://sanity.io/manage
NEXT_PUBLIC_SANITY_PROJECT_ID="your-sanity-project-id"
NEXT_PUBLIC_SANITY_DATASET="production"
NEXT_PUBLIC_SANITY_API_VERSION="2025-10-13"

# =============================================================================
# REQUIRED - PostHog Analytics (Optional but recommended)
# =============================================================================
# Get these from your PostHog project: https://app.posthog.com
NEXT_PUBLIC_POSTHOG_KEY="your-posthog-key-here"
NEXT_PUBLIC_POSTHOG_HOST="https://us.i.posthog.com"

# =============================================================================
# REQUIRED - VAPI AI Configuration (for voice calls)
# =============================================================================
# Get these from your VAPI dashboard: https://dashboard.vapi.ai
VAPI_PRIVATE_KEY="your-vapi-private-api-key-here"
VAPI_ASSISTANT_ID="assistant-id-here"
VAPI_PHONE_NUMBER_ID="phone-number-id-here"
NEXT_PUBLIC_VAPI_PUBLIC_KEY="your-vapi-public-key-here"
VAPI_WEBHOOK_SECRET="your-webhook-secret-here"

# =============================================================================
# REQUIRED - QStash Configuration (for scheduled calls)
# =============================================================================
# Get these from Upstash Console: https://console.upstash.com/qstash
QSTASH_TOKEN="your-qstash-token-here"
QSTASH_CURRENT_SIGNING_KEY="your-current-signing-key"
QSTASH_NEXT_SIGNING_KEY="your-next-signing-key"

# =============================================================================
# OPTIONAL - Anthropic AI Configuration (for entity extraction)
# =============================================================================
# Get this from your Anthropic Console: https://console.anthropic.com
# Used for AI-powered entity extraction from clinical text (transcripts, SOAP notes, etc.)
# If not provided, /api/normalize endpoint will not work
ANTHROPIC_API_KEY="your-anthropic-api-key-here"

# =============================================================================
# REQUIRED - Resend Email Configuration (for discharge emails)
# =============================================================================
# Get this from your Resend dashboard: https://resend.com/api-keys
# Used for sending discharge summary emails to pet owners
RESEND_API_KEY="re_your-resend-api-key-here"

# =============================================================================
# REQUIRED - IDEXX Credential Encryption
# =============================================================================
# Generate a secure 32-byte (256-bit) encryption key for AES-256-GCM
# This key is used to encrypt IDEXX Neo credentials stored in the database
# 
# Generate a new key with: node -e "const crypto = require('crypto'); console.log(crypto.randomBytes(32).toString('base64'));"
# 
# IMPORTANT: 
# - Use a different key for each environment (dev, staging, production)
# - Never commit this key to git
# - Store securely and rotate periodically
# - For key rotation, you can add versioned keys: IDEXX_ENCRYPTION_KEY_V1, IDEXX_ENCRYPTION_KEY_V2, etc.
IDEXX_ENCRYPTION_KEY="your-32-byte-base64-encoded-key-here"

# =============================================================================
# REQUIRED - Site Configuration
# =============================================================================
# Site URL for webhooks and canonical links
# Development: http://localhost:3000
# Production: https://your-domain.com
NEXT_PUBLIC_SITE_URL="http://localhost:3000"

# =============================================================================
# OPTIONAL - Slack Bot Configuration (for daily checklist bot)
# =============================================================================
# Create a Slack app at https://api.slack.com/apps
# Required for clinic daily operations checklist functionality
#
# Bot Scopes needed: channels:read, chat:write, commands, users:read
# Slash Command: /checklist -> {SITE_URL}/api/slack/webhooks/commands
# Interactivity URL: {SITE_URL}/api/slack/webhooks/interactions
# OAuth Redirect URL: {SITE_URL}/api/slack/oauth/callback
SLACK_CLIENT_ID="your-slack-client-id-here"
SLACK_CLIENT_SECRET="your-slack-client-secret-here"
SLACK_SIGNING_SECRET="your-slack-signing-secret-here"

# =============================================================================
# REQUIRED - Stripe Configuration (for billing)
# =============================================================================
# Get these from your Stripe dashboard: https://dashboard.stripe.com/apikeys
# Webhook secret: https://dashboard.stripe.com/webhooks
STRIPE_SECRET_KEY="sk_test_..."
STRIPE_WEBHOOK_SECRET="whsec_..."

# =============================================================================
# SYSTEM - Environment Detection
# =============================================================================
# This is automatically set by Next.js, but you can override if needed
NODE_ENV="development"

# =============================================================================
# SETUP INSTRUCTIONS
# =============================================================================
# 1. Copy this file: cp .env.example .env.local
# 2. Fill in your actual values above
# 3. Never commit .env.local to git (it's in .gitignore)
# 4. For production, set these as environment variables in your hosting platform
#
# Supabase Setup:
# - Create a project at https://supabase.com/dashboard
# - Go to Settings > API to get your keys
# - Make sure to create the vapi_calls table with proper schema
#
# Sanity Setup:
# - Create a project at https://sanity.io
# - Get your project ID from the dashboard
# - Set up your content schema
#
# PostHog Setup (Optional):
# - Create a project at https://app.posthog.com
# - Get your project key from Project Settings
#
# VAPI AI Setup:
# - Create an account at https://dashboard.vapi.ai
# - Get your private API key from Settings > API Keys (for server-side calls)
# - Get your public API key (for browser-based test calls)
# - Create an assistant and copy its ID
# - Purchase a phone number and copy its ID
# - Configure webhook URL: https://your-domain.com/api/webhooks/vapi
# - Set webhook secret for signature verification
#
# QStash Setup:
# - Create account at https://console.upstash.com
# - Navigate to QStash section
# - Copy your token and signing keys
# - Used for scheduling calls in advance
#
# Anthropic AI Setup (Optional):
# - Create an account at https://console.anthropic.com
# - Go to API Keys section and generate a new key
# - Required for /api/normalize endpoint (entity extraction from clinical text)
# - Uses Claude 3.5 Sonnet model for high-quality extraction
#
# Slack Bot Setup (Optional):
# - Create an app at https://api.slack.com/apps
# - Add Bot Scopes: channels:read, chat:write, commands, users:read
# - Create Slash Command: /checklist -> {SITE_URL}/api/slack/webhooks/commands
# - Enable Interactivity URL: {SITE_URL}/api/slack/webhooks/interactions
# - Add OAuth Redirect URL: {SITE_URL}/api/slack/oauth/callback
# - Copy Client ID, Client Secret, and Signing Secret from Basic Information
# - Install to workspace via: {SITE_URL}/api/slack/oauth/install
#
